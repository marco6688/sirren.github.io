---
title: 计算机网络-数据库链路层
date: 2019-05-16 16:45:12
categories:
- 读书笔记
tags:
- 读书笔记
- 计算机网络
---

数据库链路层属于计算机网络底层，主要介绍点对点信道和共享信道的局域网和有关协议

# 使用点对点信道的数据库链路层

## 数据链路和帧

链路 一个结点到相邻结点的一段屋里线路，中间没有任何其他的交换点
数据链路 在一条线路上传输数据时，需要通讯协议来控制这些数据的传输。把这些协议的硬件和软件加到链路上就成了数据链路

	最常用的方法是使用网络适配器来实现这些协议

数据链路层的协议数据单元是**帧**

## 三个基本问题

### 封装成帧

在一段数据的前后分别添加头部和尾部，这样就构成了一个帧

作用是起到进行**帧界定**

在传输过程中可能会遇到传输中断，这样接收端知道这是一个不完整的帧，必须丢弃

### 透明传输

传输过程中出现了结束符，导致接收端误认为传输结束

解决办法是在发送端发送的数据中出现界定符，那么就在界定符前添加一个转义字符，接收端的数据链路层在把数据送往网络层之前删掉这个插入的转义字符

### 差错检测

传输过程中会遇到**比特差错**，0可能会变成1，而1也可能变为0

传输错误的比特占所传输比特的总数称为**误码率**

误码率与信噪比有很大的关系

计算机在传输数据的时候，必须采用各种差错检测措施

# 点对点协议PPP

## PPP协议的特点

用户需要连接ISP才能接入互联网，PPP协议就是用户计算机和ISP通讯时所使用的数据链路层协议

满足的需求：

1. 简单 对数据链路层的帧不需要纠错，不需要序号，不需要流量控制
2. 封装成帧 PPP协议使用特殊字符作为界定符，以便找到开始结束
3. 透明性 PPP协议必须保证数据传输透明性
4. 多重网络协议 PPP协议能够在一条物理线路上同时支持多重网络协议的运行
5. 多重类型链路 PPP还需要能够在多重类型的链路上运行
6. 差错检测 PPP协议必须能够对接收端的帧进行检测，并立即丢弃有差错的帧
7. 检测连接状态 必须有一种机制能够及时自动检测出链路是否处于正常状态
8. 最大传输单元 必须对每一种类型的点对点链路设置最大传输单元
9. 网络层地址协商 必须提供一种机制使通讯的两个网络层的实体通过协商知道或能够配置彼此的网络层地址
10. 数据压缩协商 必须采用一种方法来协商使用数据压缩算法

PPP协议的组成：

1. 一个将数据报封装到串行链路的方法
2. 用来建立、配置和测试数据链路连接的**链路控制协议（LCP）**
3. 一套**网络控制协议（NCP）**

## PPP协议的帧格式

### 各字段的意义

帧的首部和尾部分别是4个字段和两个字段

首部的第一个字段和尾部的最后一个字段是标志字段F，规定为0x7E，表示一个帧的开始或结束
，连续两个帧之间只需要一个标志字段，出现两个连续的标志字段表示空帧

首部的第二个字段A，规定为0xFF，第三个字段C规定为0x03
首部的第四个字段是2字节的协议，为0x0021表示IP数据报，0xC021表示PPP链路控制协议LCP数据，0x8021表示网络层控制数据

信息部分长度是可以变的，不超过1500字节

尾部的第一个字段，是使用CRC的帧检验序列FCS

![PPP帧的格式](/assets/images/QQ20190517-175700@2x.png)

### 字段填充

当信息字段中出现和标志字段一样的比特（0x7E）组合时，必须采取一些措施使这种形式上和标志字段一样的比特不出现在信息字段中

PPP使用异步传输时，他把转义字符定位0x7D，并使用字节填充

1. 把信息字段出现的每一个0x7E字节转变为两字节序列（0x7D，0x5E）
2. 把信息字段出现一个0x7D字节，转换为两字节序列（0x7D，0x5D）
3. 信息字段中出现ASCII码的控制字符（数值小于0x20的字符），在该字符前加一个0x7D字节，同时将该字符的编码加以改变

### 零比特填充

PPP协议在使用SONET/SDH链路时，使用同步传输（一连串的比特连续传送）而不是异步传输，在这种情况下采用零比特填充来实现透明传输

发送端扫描整个信息字段，只要发现5个连续的1就在后面添加一个0，这样就不会出现6个1就不会导致误判边界。接收端先找到一个F的边界，在对其中的比特流进行扫描把添加的0删除

### PPP协议之所以不使用序号和确认机制的原因

1. 在数据链路层出错的概率不大时，使用相对简单的PPP协议较为合理
2. PPP协议的信息字段是IP数据报，数据链路传输并不能保证网络传输也是可靠地
3. 帧检验序列FCS字段可以保证无差错接受

## PPP协议的工作状态

当用户拨号接入ISP，建立了一条个人电脑到ISP的物理连接
这时，个人用户向ISP发送一系列的链路控制协议LCP分组，以便建立LCP连接
这些分组及其相应选择一些PPP参数，接着进行网络层配置，网络控制协议NCP给新接入的用户分配了一个临时IP地址，这台PC就成为互联网上一台有IP地址的主机了
当通信完毕时，NCP释放网络层连接，收回原来分配出去的IP地址，接着LCP释放数据链路层连接，最后释放的是物理层的连接

# 使用广播信道的数据链路层





