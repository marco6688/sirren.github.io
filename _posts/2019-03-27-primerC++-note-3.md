---
title: PrimerC++-表达式
date: 2019-03-27 15:58:54
categories:
- 读书笔记
tags:
- 读书笔记
- C++
---

C++提供了一套丰富的运算符，并定义了这些运算符作用于内置类型的运算对象时所执行的操作。同时，当运算对象是类类型时，C++语言也允许由用户指定上述运算符的含义

**表达式**是由一个或多个**运算对象**组成，对表达式求值将得到一个**结果**

# 基础

## 基本概念

C++定义了一元运算符和二元运算符，作用于一元对象的是一元运算符，作用于两个对象叫做二元运算符

### 组合运算符和运算对象

对于含有多个运算符的复杂表达式，首先要理解运算符的**优先级**、**结合律**以及运算的**求值顺序**

### 对象类型的转换

对表达式求值得过程中，运算对象常常从一种类型转换成另一种类型

### 运算符重载

当运算符作用于类类型的运算对象时，用户可以自定义其含义，这种自定义的过程为已存在的运算符提供了另外一种含义称之为**重载运算符**

### 左值和右值

左值可以理解为位于赋值运算符的左侧，当一个对象被用作右值得时候用的是对象的值，当对象被用作左值的时候用的是对象的身份

## 优先级与结合律

**复合表达式**是指包含两个或多个运算符的表达式，求复合表达式首先要将运算符与运算对象合理的结合在一起，优先级与结合律决定了运算对象的组合方式。

- 括号无视优先级与结合律

## 求值顺序

优先级决定了运算对象的组合方式，但是并没有说明运算对象的求值顺序

```

int i = a()+b()*c()+d();
//上面表达式按照优先级先取得b()和c()的结果相乘
//按照结合律a的返回值与b、c返回值的乘积相加，在于d的返回值相加
//对于函数的调用顺序并没有明确规定

```

## 算术运算符

|运算符|功能|用法|
|---|---|---|
|+|一元正好|+ expr|
|-|一元负号|- expr|
|*|乘法|expr * expr|
|/|除法|expr / expr|
|%|求余|expr % expr|
|+|加法|expr + expr|
|-|减法|expr - expr|

上述运算符按照运算符的优先级将其分组，一元运算符的优先级最高，接下来是乘法除法，优先级最低的是加法减法，当运算符相同时，按照从左到右的顺序组合

- 布尔值参加运算true会被转换成1
- 进行加减乘除算数运算时，对象含有小数部分直接弃除，返回整数部分
- %取余运算符参与运算的对象必须为整数类型

## 逻辑关系运算符

结合律|运算符|功能|用法
---|---|---|---
右|!|逻辑非|!expr
左|<|小于|expr < expr
左|<=|小于等于|expr <= expr
左| \> |大于|expr > expr
左|>=|大于等于|expr >= expr
左|==|等于|expr == expr
左|!=|不等于|expr != expr
左|&&|逻辑与|expr && expr
左| \|\| |逻辑或|expr || expr

### 逻辑与和逻辑或的短路求值

当逻辑与的求职是两个运算对象的结果都为真结果为真，逻辑或则是两个运算对象一个为真则就为真。
逻辑与和逻辑或都是先求左侧值，再求右侧值。当左侧的值无法确定表达式的结果是运算符才会计算右侧的值。这种策略称为**短路求值**

### 逻辑非运算符

逻辑非运算符是对运算结果取反后返回

## 赋值运算符

